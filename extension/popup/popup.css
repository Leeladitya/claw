/* ── Claw Extension — Industrial Precision ──────────────── */

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:          #0c0e12;
  --surface:     #13161c;
  --surface-2:   #1a1e26;
  --border:      #262b36;
  --text:        #d4d8e0;
  --text-muted:  #6b7280;
  --text-dim:    #4b5060;
  --amber:       #f59e0b;
  --amber-dim:   rgba(245, 158, 11, 0.12);
  --green:       #22c55e;
  --green-dim:   rgba(34, 197, 94, 0.10);
  --red:         #ef4444;
  --red-dim:     rgba(239, 68, 68, 0.10);
  --blue:        #3b82f6;
  --blue-dim:    rgba(59, 130, 246, 0.10);
  --radius:      6px;
  --radius-sm:   4px;
  --font:        "SF Mono", "Cascadia Code", "Fira Code", Menlo, monospace;
}

body {
  width: 400px;
  min-height: 180px;
  max-height: 600px;
  overflow-y: auto;
  font-family: var(--font);
  font-size: 11.5px;
  line-height: 1.5;
  color: var(--text);
  background: var(--bg);
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

#app { padding: 14px; display: flex; flex-direction: column; gap: 10px; }

/* ── Header ──────────────────────────────────────────── */

header { display: flex; justify-content: space-between; align-items: center; }
.brand { display: flex; align-items: center; gap: 8px; color: var(--amber); }
.brand h1 {
  font-size: 13px; font-weight: 800; letter-spacing: 3px;
  color: var(--text); font-family: var(--font);
}
.header-right { display: flex; align-items: center; gap: 8px; }
.pack-badge {
  font-size: 9px; font-weight: 700; letter-spacing: 0.5px;
  text-transform: uppercase; padding: 2px 7px; border-radius: 3px;
  background: var(--amber-dim); color: var(--amber);
  border: 1px solid rgba(245, 158, 11, 0.25);
}
.conn-dot { width: 7px; height: 7px; border-radius: 50%; background: var(--text-dim); }
.conn-dot.ok { background: var(--green); box-shadow: 0 0 6px rgba(34, 197, 94, 0.4); }
.conn-dot.err { background: var(--red); }

/* ── Status Bar ──────────────────────────────────────── */

.status-bar {
  display: flex; justify-content: space-between; align-items: center;
  padding: 7px 10px; border-radius: var(--radius);
  background: var(--surface); border: 1px solid var(--border);
}
.status-indicator { display: flex; align-items: center; gap: 7px; }
.status-icon {
  width: 6px; height: 6px; border-radius: 50%;
  background: var(--text-dim); flex-shrink: 0;
}
.status-detail { font-size: 10px; color: var(--text-dim); }
.status-bar.idle .status-icon { background: var(--text-dim); }
.status-bar.working .status-icon { background: var(--amber); animation: blink 0.8s infinite; }
.status-bar.done .status-icon { background: var(--green); }
.status-bar.error .status-icon { background: var(--red); }
.status-bar.denied .status-icon { background: var(--red); }

@keyframes blink { 0%,100% { opacity: 1; } 50% { opacity: 0.3; } }

/* ── Scan Button ─────────────────────────────────────── */

.btn-scan {
  display: flex; align-items: center; justify-content: center; gap: 8px;
  width: 100%; padding: 9px 16px; border: 1px solid var(--amber);
  border-radius: var(--radius); background: transparent;
  color: var(--amber); font-family: var(--font);
  font-size: 11px; font-weight: 700; letter-spacing: 0.5px;
  text-transform: uppercase; cursor: pointer;
  transition: all 0.15s;
}
.btn-scan:hover { background: var(--amber-dim); }
.btn-scan:active { transform: scale(0.98); }
.btn-scan:disabled { opacity: 0.35; cursor: not-allowed; border-color: var(--text-dim); color: var(--text-dim); }

/* ── Policy Banner ───────────────────────────────────── */

.policy-banner {
  padding: 10px 12px; border-radius: var(--radius);
  border: 1px solid var(--border); background: var(--surface);
}
.policy-banner.allow { border-left: 3px solid var(--green); }
.policy-banner.modified { border-left: 3px solid var(--amber); }
.policy-banner.denied { border-left: 3px solid var(--red); }

.policy-header { display: flex; align-items: flex-start; gap: 10px; }
.policy-decision-icon { font-size: 16px; line-height: 1; flex-shrink: 0; margin-top: 1px; }
.policy-decision-text { font-weight: 700; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; }
.policy-detail { font-size: 10.5px; color: var(--text-muted); margin-top: 2px; }

.policy-rules, .policy-mods {
  margin-top: 8px; padding-top: 8px;
  border-top: 1px solid var(--border);
}
.rules-label, .mods-label {
  font-size: 9px; font-weight: 700; text-transform: uppercase;
  letter-spacing: 0.5px; color: var(--text-dim); margin-bottom: 4px;
}
.policy-rules ul, .policy-mods ul { list-style: none; }
.policy-rules li, .policy-mods li {
  font-size: 10px; color: var(--text-muted); padding: 2px 0;
  padding-left: 10px; position: relative;
}
.policy-rules li::before { content: "×"; position: absolute; left: 0; color: var(--red); font-weight: 700; }
.policy-mods li::before { content: "~"; position: absolute; left: 0; color: var(--amber); font-weight: 700; }

/* ── Cards ───────────────────────────────────────────── */

.card {
  padding: 10px 12px; border-radius: var(--radius);
  background: var(--surface); border: 1px solid var(--border);
}
.card h2 {
  font-size: 9px; font-weight: 700; text-transform: uppercase;
  letter-spacing: 1px; color: var(--text-dim); margin-bottom: 7px;
}
.card-header { display: flex; justify-content: space-between; align-items: center; }
.card-label { font-size: 9px; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-dim); margin-bottom: 3px; }
.page-title { font-weight: 600; font-size: 11.5px; word-break: break-word; }
.page-url { font-size: 10px; color: var(--blue); word-break: break-all; margin-top: 2px; }

/* ── PII Grid ────────────────────────────────────────── */

.pii-total {
  font-size: 10px; font-weight: 700; padding: 1px 6px;
  border-radius: 3px;
}
.pii-total.clean { background: var(--green-dim); color: var(--green); }
.pii-total.detected { background: var(--red-dim); color: var(--red); }

.pii-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 4px;
}
.pii-item {
  padding: 5px 7px; border-radius: var(--radius-sm);
  background: var(--surface-2); text-align: center;
}
.pii-item .pii-count { font-size: 14px; font-weight: 800; display: block; }
.pii-item .pii-type { font-size: 8px; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-dim); }
.pii-item.has-pii .pii-count { color: var(--red); }
.pii-item.clean .pii-count { color: var(--green); }

/* ── Summary ─────────────────────────────────────────── */

#summary-bullets { list-style: none; display: flex; flex-direction: column; gap: 5px; }
#summary-bullets li {
  padding: 6px 8px 6px 20px; position: relative;
  background: var(--surface-2); border-radius: var(--radius-sm);
  font-size: 11px; line-height: 1.55;
}
#summary-bullets li::before {
  content: "▸"; position: absolute; left: 8px; color: var(--amber); font-weight: 700;
}

/* ── Risk ────────────────────────────────────────────── */

.risk-row { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }
.risk-meter { flex: 1; height: 5px; border-radius: 3px; background: var(--border); overflow: hidden; }
.risk-fill { height: 100%; border-radius: 3px; width: 0%; transition: width 0.5s ease, background 0.3s; }
.risk-score { font-size: 15px; font-weight: 800; min-width: 30px; text-align: right; }
.risk-rationale { font-size: 10px; color: var(--text-muted); font-style: italic; }

/* ── Safety Flags ────────────────────────────────────── */

.safety-list { display: flex; flex-direction: column; gap: 4px; }
.safety-flag {
  padding: 6px 8px; border-radius: var(--radius-sm);
  font-size: 10.5px; line-height: 1.45;
  display: flex; align-items: flex-start; gap: 7px;
}
.safety-flag .flag-icon { flex-shrink: 0; font-size: 11px; margin-top: 1px; }
.flag-ok { background: var(--green-dim); border: 1px solid rgba(34, 197, 94, 0.15); color: var(--green); }
.flag-warn { background: var(--amber-dim); border: 1px solid rgba(245, 158, 11, 0.15); color: var(--amber); }
.flag-danger { background: var(--red-dim); border: 1px solid rgba(239, 68, 68, 0.15); color: var(--red); }

/* ── Audit ───────────────────────────────────────────── */

.audit-grid { display: grid; grid-template-columns: auto 1fr; gap: 2px 10px; }
.audit-key { font-size: 9px; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-dim); text-align: right; padding: 1px 0; }
.audit-val { font-size: 10px; color: var(--text-muted); padding: 1px 0; word-break: break-all; }

/* ── Denied State ────────────────────────────────────── */

.denied-banner {
  text-align: center; padding: 24px 16px;
  border: 1px solid rgba(239, 68, 68, 0.2); border-radius: var(--radius);
  background: var(--red-dim);
}
.denied-banner svg { color: var(--red); margin-bottom: 8px; }
.denied-banner h2 { font-size: 13px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; color: var(--red); }
.denied-reason { font-size: 11px; color: var(--text-muted); margin-top: 6px; }
.denied-rules { margin-top: 10px; }
.denied-rules .denied-rule {
  display: inline-block; font-size: 9px; padding: 2px 7px;
  border-radius: 3px; background: rgba(239, 68, 68, 0.08);
  border: 1px solid rgba(239, 68, 68, 0.15);
  color: var(--red); margin: 2px;
}

/* ── Error Card ──────────────────────────────────────── */

.error-card {
  border-color: rgba(239, 68, 68, 0.2);
  background: var(--red-dim); color: var(--red);
}

/* ── Footer ──────────────────────────────────────────── */

footer { text-align: center; font-size: 9px; color: var(--text-dim); padding-top: 2px; }

/* ── Utilities ───────────────────────────────────────── */

.hidden { display: none !important; }
